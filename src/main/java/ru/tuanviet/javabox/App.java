package ru.tuanviet.javabox;

import java.util.Arrays;

public class App {
    public static void main(String... args) {
        new SuperBenchmark().benchmark(
                Arrays.asList(BenchMarks1.class, BenchMarks2.class)
        );
    }

    public static int add(int x, int y) {
        return x + y;
    }

    public static void sleep(int i) {
        try {
            Thread.sleep(i);
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
    }

}

class BenchMarks1 {
    @Benchmark(repeats = 10_000, timeout = 1_000)
    public void should_add_10000_numbers_in_1_second() {
        int sum = App.add(10, 15);
    }
}

class BenchMarks2 {
    @Benchmark(repeats = 10, timeout = 100)
    public void should_add_10_numbers_in_100_milliseconds() {
        int sum = App.add(10, 15);
    }
}

class BenchMarks3 {
    @Benchmark(repeats = 20000, timeout = 10)
    public void shouldAdd10NumbersIn100Milliseconds() {
        int sum = App.add(10, 15);
        App.sleep(7);
    }
}


// -- OUTPUT ------------------------------------------------
// Benchmark started at 2021.11.07 14:34:17.456
//
// [Test 1b6cefae-a333-4074-a4c1-b7ca35f9de3c PASSED]
// > Add 10000 numbers in 1 second
// Repeats: 10000/10000
// Timeout: 1000ms
// Min: 12ms
// Avg: 23ms
// Max: 67ms
//
// [Test 98ebe708-1c73-46ea-8c8c-05e1d49dfadb FAILED]
// > Add 10 numbers in 100 milliseconds
// Repeats: 6/10
// Timeout: 100ms
// Min: 14ms
// Avg: 18ms
// Max: 171ms
